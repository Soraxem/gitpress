---
title: Gitpress
---

<script src="https://unpkg.com/@isomorphic-git/lightning-fs"></script>
<script src="https://unpkg.com/isomorphic-git@1.24.5/index.umd.min.js"></script>
<script src="https://unpkg.com/isomorphic-git/http/web/index.umd.js"></script>
<script>
// Initialize isomorphic-git with a file system
window.fs = new LightningFS('fs', { wipe: true });
// git.plugins.set('fs', window.fs);
// I prefer using the Promisified version honestly
window.pfs = window.fs.promises;
</script>

<script>
// clone current repo
window.dir = "/repo"
console.log(dir);
pfs.mkdir(dir);
// Behold - it is empty!
// console.log(await pfs.readdir(dir));
git.clone({
  http: GitHttp,  
  fs: pfs,
  dir: dir,
  corsProxy: 'https://cors.isomorphic-git.org',
  url: '{{ site.repo }}',
  ref: 'main',
  singleBranch: true,
  depth: 2
});
